# Release Notes for PartsHub v0.2.0

**Release Date**: October 4, 2025
**GitHub Release**: [v0.2.0](https://github.com/madeinoz67/partshub/releases/tag/v0.2.0)
**Comparison**: [v0.1.2...v0.2.0](https://github.com/madeinoz67/partshub/compare/v0.1.2...v0.2.0)

## Overview

PartsHub v0.2.0 introduces **Bulk Operations for Component Management**, a powerful admin feature enabling efficient management of large component inventories. This release allows administrators to perform actions on multiple components simultaneously with atomic transaction safety, cross-page selection persistence, and comprehensive error handling. The feature includes 9 different bulk operations covering tags, projects, deletion, meta-parts, purchase lists, stock levels, and attribution management.

## Major Features

### Bulk Operations for Component Management

The headline feature of v0.2.0 is the new bulk operations system enabling administrators to manage multiple components efficiently.

#### Key Capabilities

- **Cross-Page Selection**: Selection persists across pagination - select components from multiple pages and perform operations on all selected items
- **Selection Counter**: Real-time display of selected component count in the UI
- **Admin-Only Access**: All bulk operations require admin authentication for security
- **Atomic Transactions**: All-or-nothing execution ensures data consistency
- **Concurrent Modification Detection**: Prevents conflicting updates from multiple users
- **Comprehensive Error Handling**: Detailed error reporting with automatic rollback on failure

#### Available Operations

1. **Add or Remove Tags**
   - Add multiple tags to selected components
   - Remove tags from selected components
   - View common tags (present on ALL selected) and all tags (present on ANY selected)
   - Real-time preview of tag changes before applying

2. **Add to Project**
   - Assign multiple components to a project
   - Specify quantities for each component (default: 1)
   - Adjust quantities with +/- buttons in the dialog

3. **Delete Components**
   - Permanently remove multiple components
   - Atomic transaction ensures all-or-nothing deletion
   - Confirmation dialog prevents accidental deletions

4. **Add to Meta-Part**
   - Group components into meta-part definitions
   - Simplify component management and organization

5. **Add to Purchase List**
   - Queue multiple components for purchasing
   - Streamline procurement workflows

6. **Update Stock Levels**
   - Bulk update inventory quantities
   - Efficient stock management for large inventories

7. **Update Attribution**
   - Manage component attribution data in bulk
   - Track sourcing and attribution information

8. **Update Meta-Part**
   - Modify meta-part assignments for multiple components
   - Reorganize component groupings

9. **Deselect All**
   - Clear current selection
   - Reset for new bulk operation

#### API Endpoints

All endpoints are under `/api/v1/components/bulk` and require admin authentication.

```bash
# Add tags to components
POST /api/v1/components/bulk/tags/add
Authorization: Bearer <admin-token>
Content-Type: application/json

{
  "component_ids": ["uuid-1", "uuid-2", "uuid-3"],
  "tags": ["resistor", "SMD"]
}

# Response: 200 OK
{
  "success": true,
  "affected_count": 3,
  "errors": null
}

# Remove tags from components
POST /api/v1/components/bulk/tags/remove
Authorization: Bearer <admin-token>
Content-Type: application/json

{
  "component_ids": ["uuid-1", "uuid-2"],
  "tags": ["obsolete"]
}

# Add components to project
POST /api/v1/components/bulk/add-to-project
Authorization: Bearer <admin-token>
Content-Type: application/json

{
  "project_id": "project-uuid",
  "quantities": {
    "component-uuid-1": 10,
    "component-uuid-2": 5
  }
}

# Delete components
POST /api/v1/components/bulk/delete
Authorization: Bearer <admin-token>
Content-Type: application/json

{
  "component_ids": ["uuid-1", "uuid-2", "uuid-3"]
}

# Error responses:
# 400 Bad Request - Invalid request body or parameters
# 401 Unauthorized - Missing or invalid JWT token
# 403 Forbidden - User is not an admin
# 409 Conflict - Concurrent modification detected (rolled back)
```

#### Performance

- **Target**: <200ms for operations on <100 components
- **Atomic Transactions**: Ensures data consistency across all operations
- **Optimized Queries**: Efficient database operations for large datasets

### Frontend Components

- **BulkOperationsMenu**: Dropdown menu with all bulk operations
- **AddTagsDialog**: Dialog for adding/removing tags with preview
- **AddToProjectDialog**: Dialog for assigning components to projects with quantity controls
- **DeleteDialog**: Confirmation dialog for bulk deletions
- **Selection State Management**: Pinia store for cross-page selection persistence
- **Disabled State Handling**: Automatic button state updates based on selection

### Backend Services

- **BulkOperationsRouter**: FastAPI router with 9 bulk operation endpoints
- **BulkOperationsService**: Business logic orchestration with transaction management
- **Tag Management**: Create/assign/remove tags with duplicate prevention
- **Project Assignment**: Bulk component-to-project relationships
- **Concurrent Modification Detection**: Version checking to prevent conflicts
- **Transaction Safety**: Automatic rollback on any operation failure

## API Changes

### New Endpoints

All bulk operations are under the `/api/v1/components/bulk` prefix:

```
POST /api/v1/components/bulk/tags/add
POST /api/v1/components/bulk/tags/remove
POST /api/v1/components/bulk/add-to-project
POST /api/v1/components/bulk/delete
POST /api/v1/components/bulk/add-to-meta-part
POST /api/v1/components/bulk/add-to-purchase-list
POST /api/v1/components/bulk/update-stock
POST /api/v1/components/bulk/update-attribution
POST /api/v1/components/bulk/update-meta-part
```

### Request/Response Schemas

- **BulkTagOperation**: `component_ids` (string[]), `tags` (string[])
- **BulkProjectAssignment**: `project_id` (string), `quantities` (Record<string, number>)
- **BulkDeleteRequest**: `component_ids` (string[])
- **BulkOperationResponse**: `success` (boolean), `affected_count` (number), `errors` (array or null)

## Bug Fixes

### Backend

- Fixed release workflow to trigger correctly from release-please branch
- Corrected GitHub action links in README to reflect repository owner

### Frontend

- Updated bulk operations API routing from `/api/components/bulk` to `/api/v1/components/bulk`
- Fixed type definitions: `componentIds` changed from `number[]` to `string[]` (UUIDs)
- Fixed project ID types from `number` to `string` throughout bulk operations
- Updated quantities type from `Record<number, number>` to `Record<string, number>`
- Changed bulk delete HTTP method from DELETE to POST to match backend
- Removed duplicate success toast in AddToProjectDialog (parent already handles it)

### Tests

- Updated all bulk operation test URLs to use `/api/v1/components/bulk` prefix
- Fixed type mismatches in bulk operations tests
- Ensured consistent UUID usage across test suite

## Security

- **Admin-Only Access**: All bulk operations require admin authentication
- **JWT Bearer Token**: Secure authentication using industry-standard tokens
- **Atomic Transactions**: Prevent partial updates and data inconsistencies
- **Concurrent Modification Detection**: Prevents race conditions and conflicting updates
- **Input Validation**: Comprehensive validation of request bodies and parameters

## Documentation

New comprehensive documentation added:

- **User Guide**: [docs/user/bulk-operations.md](../user/bulk-operations.md) - Complete user workflows and troubleshooting
- **API Guide**: [docs/api/bulk-operations.md](../api/bulk-operations.md) - Detailed endpoint documentation with examples
- **Features Overview**: Updated [docs/user/features.md](../user/features.md) to include bulk operations
- **API Reference**: Updated [docs/api.md](../api.md) with bulk operations endpoint table

Documentation covers:
- Selection features (cross-page persistence, counters)
- All 9 bulk operations with step-by-step instructions
- Transaction safety and atomic operations
- Concurrent modification detection
- Troubleshooting common issues
- Security and best practices
- Client examples (Python, JavaScript, cURL)
- Migration guide from individual operations

## Breaking Changes

**None** - All changes are additive and backward compatible.

## Migration Instructions

### No Database Migration Required

This release does not introduce any database schema changes. The bulk operations use existing tables and relationships.

### Frontend Type Updates

If you're using the frontend bulk operations types, note the following changes:
- `componentIds`: `number[]` → `string[]` (UUIDs)
- `projectId`: `number` → `string` (UUID)
- `quantities`: `Record<number, number>` → `Record<string, number>`

### API Endpoint Updates

If you're integrating with the bulk operations API externally, use the correct prefix:
- **Correct**: `/api/v1/components/bulk/*`
- **Incorrect**: `/api/components/bulk/*`

## Installation & Upgrade

### Fresh Installation

```bash
# Clone repository
git clone https://github.com/madeinoz67/partshub.git
cd partshub

# Install dependencies
make install

# Start development servers
make dev
```

### Upgrading from v0.1.x

```bash
# Pull latest changes
git pull origin main

# Install any new dependencies
make install

# Restart development servers
make dev
```

## Development Tools

### Commands

```bash
make install       # Install all dependencies (Python + Node.js)
make dev          # Start backend + frontend + docs servers
make test         # Run all tests
make lint         # Run ruff checks
make docs         # Start documentation server
```

### Test Execution

```bash
# All tests
cd backend && uv run pytest

# By category (using markers)
uv run pytest -m unit          # Fast unit tests only
uv run pytest -m integration   # Integration tests
uv run pytest -m contract      # API contract tests

# With coverage
uv run pytest --cov=src --cov-report=html
```

## What's Next (v0.3.0 Preview)

### Enhanced Bulk Operations
- Import/export component data in bulk (CSV, JSON)
- Bulk update of component specifications
- Advanced filtering for bulk selections
- Undo/redo for bulk operations

### Additional Features
- Real-time collaboration with live updates
- Enhanced search with AI-powered suggestions
- Mobile app for barcode scanning and quick updates
- Advanced reporting and analytics dashboard

### Infrastructure
- Performance monitoring and optimization
- Enhanced caching strategies
- WebSocket support for real-time features
- Additional provider integrations

## Known Issues

None at this time.

## Support & Feedback

- **Issues**: [GitHub Issues](https://github.com/madeinoz67/partshub/issues)
- **Discussions**: [GitHub Discussions](https://github.com/madeinoz67/partshub/discussions)
- **Documentation**: Check the `/docs/` directory in the repository

---

**Full Changelog**: https://github.com/madeinoz67/partshub/blob/main/CHANGELOG.md
