# Release Notes for PartsHub v0.2.1

**Release Date**: October 4, 2025
**GitHub Release**: [v0.2.1](https://github.com/madeinoz67/partshub/releases/tag/v0.2.1)
**Comparison**: [v0.2.0...v0.2.1](https://github.com/madeinoz67/partshub/compare/v0.2.0...v0.2.1)

## Overview

PartsHub v0.2.1 is a maintenance release that fixes critical issues in the CI/CD pipeline and documentation deployment. This release ensures reliable automated releases and documentation publishing for the project.

## Bug Fixes

### Release Workflow

**Fixed release workflow tag extraction for workflow_call**

The release workflow was failing with a version mismatch error when triggered by release-please. The issue occurred because when called via `workflow_call`, `GITHUB_REF` contains the branch reference (`refs/heads/main`) instead of a tag reference.

**Changes**:
- Added `tag_name` input parameter to release.yml workflow_call trigger
- Updated version extraction logic to use `inputs.tag_name` when called from release-please
- Modified release-please workflow to pass the `tag_name` output to the release workflow
- Maintained backward compatibility with direct tag push triggers

**Impact**: The release workflow now executes successfully when triggered by release-please, enabling automated releases.

### Documentation Deployment

**Resolved documentation build and deployment issues**

The documentation deployment was failing with git push conflicts and build warnings that could cause future failures.

**Changes**:
- Added gh-pages branch fetch step before deployment to prevent push conflicts
- Updated mkdocs.yml navigation to include missing pages:
  - Added "API Reference" section with api.md and api/bulk-operations.md
  - Added user/bulk-operations.md to User Guide section
- Added `exclude_docs` pattern to prevent README.md conflicts with index.md files
- Fixed broken documentation links:
  - `developer-notes.md` → `developer/index.md`
  - Removed broken CLAUDE.md reference
  - Fixed paths to `troubleshooting.md` and `branch-protection.md`
  - Fixed `kicad-integration.md` path in user/kicad-workflows.md

**Impact**: Documentation now builds successfully in strict mode and deploys without conflicts to GitHub Pages.

## Technical Details

### Workflow Improvements

**Before**: Release workflow failed with error:
```
❌ Version mismatch: tag=refs/heads/main, pyproject=0.2.0
Error: Process completed with exit code 1
```

**After**: Release workflow correctly extracts version from release-please output:
```yaml
- name: Extract versions
  id: version
  run: |
    if [ -n "${{ inputs.tag_name }}" ]; then
      # Called from workflow_call - use input tag_name
      TAG_VERSION=${{ inputs.tag_name }}
      TAG_VERSION=${TAG_VERSION#v}
    else
      # Triggered by tag push - use GITHUB_REF
      TAG_VERSION=${GITHUB_REF#refs/tags/v}
    fi
```

### Documentation Build

**Before**: Documentation deployment failed with:
```
error: failed to push branch gh-pages to origin:
  ! [rejected]        gh-pages -> gh-pages (fetch first)
Error: Process completed with exit code 1
```

**After**: Deployment succeeds with gh-pages fetch:
```yaml
- name: Fetch gh-pages branch
  run: |
    git fetch origin gh-pages:gh-pages || echo "gh-pages branch does not exist yet"
```

## Breaking Changes

**None** - This is a bug fix release with no breaking changes.

## Migration Instructions

No migration required. Simply pull the latest changes:

```bash
git pull origin main
```

## Installation & Upgrade

### Fresh Installation

```bash
# Clone repository
git clone https://github.com/madeinoz67/partshub.git
cd partshub

# Install dependencies
make install

# Start development servers
make dev
```

### Upgrading from v0.2.0

```bash
# Pull latest changes
git pull origin main

# No additional steps required - all changes are in CI/CD workflows
```

## Files Changed

**8 files changed**: 26 insertions(+), 6 deletions(-)

**Modified files**:
- `.github/workflows/cd.yml` - Added gh-pages fetch step
- `.github/workflows/release.yml` - Fixed tag extraction and added gh-pages fetch
- `.github/workflows/release-please.yml` - Pass tag_name to release workflow
- `mkdocs.yml` - Updated navigation and added exclude_docs pattern
- `docs/developer/index.md` - Removed broken CLAUDE.md link
- `docs/developer/workflows.md` - Fixed paths to workflow docs
- `docs/index.md` - Fixed developer-notes.md link
- `docs/user/kicad-workflows.md` - Fixed kicad-integration.md path

## Verification

Documentation now builds successfully:
```bash
uv run mkdocs build --strict
# Output: Documentation built in 1.76 seconds (SUCCESS)
```

All critical build warnings have been resolved.

## What's Next (v0.3.0 Preview)

### Enhanced Bulk Operations
- Import/export component data in bulk (CSV, JSON)
- Bulk update of component specifications
- Advanced filtering for bulk selections
- Undo/redo for bulk operations

### Additional Features
- Real-time collaboration with live updates
- Enhanced search with AI-powered suggestions
- Mobile app for barcode scanning and quick updates
- Advanced reporting and analytics dashboard

## Support & Feedback

- **Issues**: [GitHub Issues](https://github.com/madeinoz67/partshub/issues)
- **Discussions**: [GitHub Discussions](https://github.com/madeinoz67/partshub/discussions)
- **Documentation**: Check the `/docs/` directory in the repository

---

**Full Changelog**: https://github.com/madeinoz67/partshub/blob/main/CHANGELOG.md
